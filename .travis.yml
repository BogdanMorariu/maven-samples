language: java
sudo: false
jdk:  
 - oraclejdk8
before_install:  
 - curl -sL https://github.com/jpm4j/jpm4j.installers/raw/master/dist/biz.aQute.jpm.run.jar >jpm4j.jar
 - java -jar jpm4j.jar -u init
 - ~/jpm/bin/jpm install com.codacy:codacy-coverage-reporter:assembly
install: true
cache:
 directories:
 - $HOME/.m2 
script:  
 ./mvn verify -P jacoco
after_success:  
 - ~/jpm/bin/codacy-coverage-reporter -l Java -r report/target/site/jacoco/jacoco.xml
